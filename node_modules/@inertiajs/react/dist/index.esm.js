import{router as ct}from"@inertiajs/core";import{router as ke,setupProgress as Ae}from"@inertiajs/core";import{createElement as Oe}from"react";import{createHeadManager as xe,router as ue}from"@inertiajs/core";import{createElement as w,useEffect as De,useMemo as Ie,useState as Ee}from"react";import{createContext as Ce}from"react";var ie=Ce(void 0);ie.displayName="InertiaHeadContext";var K=ie;import{createContext as Re}from"react";var pe=Re(void 0);pe.displayName="InertiaPageContext";var B=pe;function _({children:p,initialPage:n,initialComponent:s,resolveComponent:i,titleCallback:a,onHeadUpdate:g}){let[u,f]=Ee({component:s||null,page:n,key:null}),c=Ie(()=>xe(typeof window>"u",a||(l=>l),g||(()=>{})),[]);if(De(()=>{ue.init({initialPage:n,resolveComponent:i,swapComponent:async({component:l,page:e,preserveState:d})=>{f(t=>({component:l,page:e,key:d?t.key:Date.now()}))}}),ue.on("navigate",()=>c.forceUpdate())},[]),!u.component)return w(K.Provider,{value:c},w(B.Provider,{value:u.page},null));let m=p||(({Component:l,props:e,key:d})=>{let t=w(l,{key:d,...e});return typeof l.layout=="function"?l.layout(t):Array.isArray(l.layout)?l.layout.concat(t).reverse().reduce((h,F)=>w(F,{children:h,...e})):t});return w(K.Provider,{value:c},w(B.Provider,{value:u.page},m({Component:u.component,key:u.key,props:u.page.props})))}_.displayName="Inertia";async function ce({id:p="app",resolve:n,setup:s,title:i,progress:a={},page:g,render:u}){let f=typeof window>"u",c=f?null:document.getElementById(p),m=g||JSON.parse(c.dataset.page),l=t=>Promise.resolve(n(t)).then(h=>h.default||h),e=[],d=await Promise.all([l(m.component),ke.decryptHistory().catch(()=>{})]).then(([t])=>s({el:c,App:_,props:{initialPage:m,initialComponent:t,resolveComponent:l,titleCallback:i,onHeadUpdate:f?h=>e=h:null}}));if(!f&&a&&Ae(a),f){let t=await u(Oe("div",{id:p,"data-page":JSON.stringify(m)},d));return{head:e,body:t}}}import{useEffect as le,useMemo as Me,useState as Le}from"react";import{useContext as we}from"react";function q(){let p=we(B);if(!p)throw new Error("usePage must be used within the Inertia component");return p}var de=({children:p,data:n,fallback:s})=>{if(!n)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[i,a]=Le(!1),g=q().props,u=Me(()=>Array.isArray(n)?n:[n],[n]);return le(()=>{let f=fe.on("start",c=>{(c.detail.visit.only.length===0&&c.detail.visit.except.length===0||c.detail.visit.only.find(m=>u.includes(m)))&&a(!1)});return()=>{f()}},[]),le(()=>{a(u.every(f=>g[f]!==void 0))},[g,u]),i?p:s};de.displayName="InertiaDeferred";var He=de;import me,{useContext as Ke,useEffect as Be,useMemo as Ve}from"react";var Ne=function({children:p,title:n}){let s=Ke(K),i=Ve(()=>s.createProvider(),[s]);Be(()=>()=>{i.disconnect()},[i]);function a(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function g(e){let d=Object.keys(e.props).reduce((t,h)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(h))return t;let F=e.props[h];return F===""?t+` ${h}`:t+` ${h}="${F}"`},"");return`<${e.type}${d}>`}function u(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((d,t)=>d+f(t),"")}function f(e){let d=g(e);return e.props.children&&(d+=u(e)),e.props.dangerouslySetInnerHTML&&(d+=e.props.dangerouslySetInnerHTML.__html),a(e)||(d+=`</${e.type}>`),d}function c(e){return me.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function m(e){return f(c(e))}function l(e){let d=me.Children.toArray(e).filter(t=>t).map(t=>m(t));return n&&!d.find(t=>t.startsWith("<title"))&&d.push(`<title inertia>${n}</title>`),d}return i.update(l(p)),null},je=Ne;import{mergeDataIntoQueryString as Ue,router as re,shouldIntercept as oe}from"@inertiajs/core";import{createElement as $e,forwardRef as We,useEffect as ge,useMemo as Pe,useRef as _e,useState as qe}from"react";var x=()=>{},ye=We(({children:p,as:n="a",data:s={},href:i,method:a="get",preserveScroll:g=!1,preserveState:u=null,replace:f=!1,only:c=[],except:m=[],headers:l={},queryStringArrayFormat:e="brackets",async:d=!1,onClick:t=x,onCancelToken:h=x,onBefore:F=x,onStart:I=x,onProgress:E=x,onFinish:Y=x,onCancel:j=x,onSuccess:z=x,onError:M=x,prefetch:T=!1,cacheFor:b=0,...G},X)=>{let[Z,U]=qe(0),L=_e(null);n=n.toLowerCase(),a=typeof i=="object"?i.method:a.toLowerCase();let[k,ee]=Ue(a,typeof i=="object"?i.url:i||"",s,e),A=k;s=ee;let $={data:s,method:a,preserveScroll:g,preserveState:u??a!=="get",replace:f,only:c,except:m,headers:l,async:d},W={...$,onCancelToken:h,onBefore:F,onStart(r){U(O=>O+1),I(r)},onProgress:E,onFinish(r){U(O=>O-1),Y(r)},onCancel:j,onSuccess:z,onError:M},H=()=>{re.prefetch(A,$,{cacheFor:te})},R=Pe(()=>T===!0?["hover"]:T===!1?[]:Array.isArray(T)?T:[T],Array.isArray(T)?T:[T]),te=Pe(()=>b!==0?b:R.length===1&&R[0]==="click"?0:3e4,[b,R]);ge(()=>()=>{clearTimeout(L.current)},[]),ge(()=>{R.includes("mount")&&setTimeout(()=>H())},R);let o={onClick:r=>{t(r),oe(r)&&(r.preventDefault(),re.visit(A,W))}},y={onMouseEnter:()=>{L.current=window.setTimeout(()=>{H()},75)},onMouseLeave:()=>{clearTimeout(L.current)},onClick:o.onClick},P={onMouseDown:r=>{oe(r)&&(r.preventDefault(),H())},onMouseUp:r=>{r.preventDefault(),re.visit(A,W)},onClick:r=>{t(r),oe(r)&&r.preventDefault()}};return a!=="get"&&(n="button"),$e(n,{...G,...{a:{href:A},button:{type:"button"}}[n]||{},ref:X,...R.includes("hover")?y:R.includes("click")?P:o,"data-loading":Z>0?"":void 0},p)});ye.displayName="InertiaLink";var Je=ye;import{router as Fe}from"@inertiajs/core";import{cloneDeep as J,isEqual as ze}from"es-toolkit";import{get as Ge,has as Xe,set as ne}from"es-toolkit/compat";import{useCallback as v,useEffect as Ze,useRef as Q,useState as D}from"react";import{router as he}from"@inertiajs/core";import{useEffect as Qe,useState as Ye}from"react";function V(p,n){let[s,i]=Ye(()=>{let a=he.restore(n);return a!==void 0?a:p});return Qe(()=>{he.remember(s,n)},[s,n]),[s,i]}function Se(p,n){let s=Q(null),i=typeof p=="string"?p:null,[a,g]=D((typeof p=="string"?n:p)||{}),u=Q(null),f=Q(null),[c,m]=i?V(a,`${i}:data`):D(a),[l,e]=i?V({},`${i}:errors`):D({}),[d,t]=D(!1),[h,F]=D(!1),[I,E]=D(null),[Y,j]=D(!1),[z,M]=D(!1),T=Q(o=>o);Ze(()=>(s.current=!0,()=>{s.current=!1}),[]);let b=v((...o)=>{let y=typeof o[0]=="object",P=y?o[0].method:o[0],C=y?o[0].url:o[1],r=(y?o[1]:o[2])??{},O={...r,onCancelToken:S=>{if(u.current=S,r.onCancelToken)return r.onCancelToken(S)},onBefore:S=>{if(j(!1),M(!1),clearTimeout(f.current),r.onBefore)return r.onBefore(S)},onStart:S=>{if(F(!0),r.onStart)return r.onStart(S)},onProgress:S=>{if(E(S),r.onProgress)return r.onProgress(S)},onSuccess:S=>{if(s.current&&(F(!1),E(null),e({}),t(!1),j(!0),M(!0),g(J(c)),f.current=setTimeout(()=>{s.current&&M(!1)},2e3)),r.onSuccess)return r.onSuccess(S)},onError:S=>{if(s.current&&(F(!1),E(null),e(S),t(!0)),r.onError)return r.onError(S)},onCancel:()=>{if(s.current&&(F(!1),E(null)),r.onCancel)return r.onCancel()},onFinish:S=>{if(s.current&&(F(!1),E(null)),u.current=null,r.onFinish)return r.onFinish(S)}};P==="delete"?Fe.delete(C,{...O,data:T.current(c)}):Fe[P](C,T.current(c),O)},[c,e,T]),G=v((o,y)=>{m(typeof o=="string"?P=>ne(J(P),o,y):typeof o=="function"?P=>o(P):o)},[m]),X=v((o,y)=>{g(typeof o>"u"?()=>c:P=>typeof o=="string"?ne(J(P),o,y):Object.assign(J(P),o))},[c,g]),Z=v((...o)=>{o.length===0?m(a):m(y=>o.filter(P=>Xe(a,P)).reduce((P,C)=>ne(P,C,Ge(a,C)),{...y}))},[m,a]),U=v((o,y)=>{e(P=>{let C={...P,...typeof o=="string"?{[o]:y}:o};return t(Object.keys(C).length>0),C})},[e,t]),L=v((...o)=>{e(y=>{let P=Object.keys(y).reduce((C,r)=>({...C,...o.length>0&&!o.includes(r)?{[r]:y[r]}:{}}),{});return t(Object.keys(P).length>0),P})},[e,t]),k=o=>(y,P)=>{b(o,y,P)},ee=v(k("get"),[b]),A=v(k("post"),[b]),$=v(k("put"),[b]),W=v(k("patch"),[b]),H=v(k("delete"),[b]),R=v(()=>{u.current&&u.current.cancel()},[]),te=v(o=>{T.current=o},[]);return{data:c,setData:G,isDirty:!ze(c,a),errors:l,hasErrors:d,processing:h,progress:I,wasSuccessful:Y,recentlySuccessful:z,transform:te,setDefaults:X,reset:Z,setError:U,clearErrors:L,submit:b,get:ee,post:A,put:$,patch:W,delete:H,cancel:R}}import{router as et}from"@inertiajs/core";import{useEffect as tt,useRef as rt}from"react";function Te(p,n={},s={keepAlive:!1,autoStart:!0}){let i=rt(et.poll(p,n,{...s,autoStart:!1}));return tt(()=>((s.autoStart??!0)&&i.current.start(),()=>i.current.stop()),[]),{stop:i.current.stop,start:i.current.start}}import{router as N}from"@inertiajs/core";import{useEffect as ot,useState as se}from"react";function ve(p={}){let n=typeof window>"u"?null:N.getCached(window.location.pathname,p),s=typeof window>"u"?null:N.getPrefetching(window.location.pathname,p),[i,a]=se(n?.staleTimestamp||null),[g,u]=se(s!==null),[f,c]=se(n!==null);return ot(()=>{let m=N.on("prefetching",e=>{e.detail.visit.url.pathname===window.location.pathname&&u(!0)}),l=N.on("prefetched",e=>{e.detail.visit.url.pathname===window.location.pathname&&(u(!1),c(!0),a(e.detail.fetchedAt))});return()=>{l(),m()}},[]),{lastUpdatedAt:i,isPrefetching:g,isPrefetched:f,flush:()=>N.flush(window.location.pathname,p)}}import{router as nt}from"@inertiajs/core";import{createElement as st,useCallback as at,useEffect as it,useRef as ae,useState as pt}from"react";var be=({children:p,data:n,params:s,buffer:i,as:a,always:g,fallback:u})=>{g=g??!1,a=a??"div",u=u??null;let[f,c]=pt(!1),m=ae(!1),l=ae(!1),e=ae(null),d=at(()=>{if(n)return{only:Array.isArray(n)?n:[n]};if(!s)throw new Error("You must provide either a `data` or `params` prop.");return s},[s,n]);return it(()=>{if(!e.current)return;let t=new IntersectionObserver(h=>{if(!h[0].isIntersecting||(!g&&m.current&&t.disconnect(),l.current))return;m.current=!0,l.current=!0;let F=d();nt.reload({...F,onStart:I=>{l.current=!0,F.onStart?.(I)},onFinish:I=>{c(!0),l.current=!1,F.onFinish?.(I),g||t.disconnect()}})},{rootMargin:`${i||0}px`});return t.observe(e.current),()=>{t.disconnect()}},[e,d,i]),g||!f?st(a,{props:null,ref:e},f?p:u):f?p:null};be.displayName="InertiaWhenVisible";var ut=be;var fe=ct;export{He as Deferred,je as Head,Je as Link,ut as WhenVisible,ce as createInertiaApp,fe as router,Se as useForm,q as usePage,Te as usePoll,ve as usePrefetch,V as useRemember};
//# sourceMappingURL=index.esm.js.map
