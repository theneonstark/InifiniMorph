var He=Object.create;var ee=Object.defineProperty;var Ke=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var Ve=Object.getPrototypeOf,Ne=Object.prototype.hasOwnProperty;var je=(r,t)=>{for(var o in t)ee(r,o,{get:t[o],enumerable:!0})},Fe=(r,t,o,p)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Be(t))!Ne.call(r,n)&&n!==o&&ee(r,n,{get:()=>t[n],enumerable:!(p=Ke(t,n))||p.enumerable});return r};var Ue=(r,t,o)=>(o=r!=null?He(Ve(r)):{},Fe(t||!r||!r.__esModule?ee(o,"default",{value:r,enumerable:!0}):o,r)),$e=r=>Fe(ee({},"__esModule",{value:!0}),r);var _e={};je(_e,{Deferred:()=>De,Head:()=>Ie,Link:()=>ke,WhenVisible:()=>Me,createInertiaApp:()=>de,router:()=>fe,useForm:()=>Pe,usePage:()=>Y,usePoll:()=>ye,usePrefetch:()=>he,useRemember:()=>N});module.exports=$e(_e);var Le=require("@inertiajs/core");var re=require("@inertiajs/core"),Ce=require("react");var Q=require("@inertiajs/core"),C=require("react");var Se=require("react"),Te=(0,Se.createContext)(void 0);Te.displayName="InertiaHeadContext";var q=Te;var ve=require("react"),be=(0,ve.createContext)(void 0);be.displayName="InertiaPageContext";var J=be;function te({children:r,initialPage:t,initialComponent:o,resolveComponent:p,titleCallback:n,onHeadUpdate:P}){let[c,m]=(0,C.useState)({component:o||null,page:t,key:null}),l=(0,C.useMemo)(()=>(0,Q.createHeadManager)(typeof window>"u",n||(d=>d),P||(()=>{})),[]);if((0,C.useEffect)(()=>{Q.router.init({initialPage:t,resolveComponent:p,swapComponent:async({component:d,page:e,preserveState:f})=>{m(s=>({component:d,page:e,key:f?s.key:Date.now()}))}}),Q.router.on("navigate",()=>l.forceUpdate())},[]),!c.component)return(0,C.createElement)(q.Provider,{value:l},(0,C.createElement)(J.Provider,{value:c.page},null));let g=r||(({Component:d,props:e,key:f})=>{let s=(0,C.createElement)(d,{key:f,...e});return typeof d.layout=="function"?d.layout(s):Array.isArray(d.layout)?d.layout.concat(s).reverse().reduce((F,S)=>(0,C.createElement)(S,{children:F,...e})):s});return(0,C.createElement)(q.Provider,{value:l},(0,C.createElement)(J.Provider,{value:c.page},g({Component:c.component,key:c.key,props:c.page.props})))}te.displayName="Inertia";async function de({id:r="app",resolve:t,setup:o,title:p,progress:n={},page:P,render:c}){let m=typeof window>"u",l=m?null:document.getElementById(r),g=P||JSON.parse(l.dataset.page),d=s=>Promise.resolve(t(s)).then(F=>F.default||F),e=[],f=await Promise.all([d(g.component),re.router.decryptHistory().catch(()=>{})]).then(([s])=>o({el:l,App:te,props:{initialPage:g,initialComponent:s,resolveComponent:d,titleCallback:p,onHeadUpdate:m?F=>e=F:null}}));if(!m&&n&&(0,re.setupProgress)(n),m){let s=await c((0,Ce.createElement)("div",{id:r,"data-page":JSON.stringify(g)},f));return{head:e,body:s}}}var H=require("react");var Re=require("react");function Y(){let r=(0,Re.useContext)(J);if(!r)throw new Error("usePage must be used within the Inertia component");return r}var xe=({children:r,data:t,fallback:o})=>{if(!t)throw new Error("`<Deferred>` requires a `data` prop to be a string or array of strings");let[p,n]=(0,H.useState)(!1),P=Y().props,c=(0,H.useMemo)(()=>Array.isArray(t)?t:[t],[t]);return(0,H.useEffect)(()=>{let m=fe.on("start",l=>{(l.detail.visit.only.length===0&&l.detail.visit.except.length===0||l.detail.visit.only.find(g=>c.includes(g)))&&n(!1)});return()=>{m()}},[]),(0,H.useEffect)(()=>{n(c.every(m=>P[m]!==void 0))},[P,c]),p?r:o};xe.displayName="InertiaDeferred";var De=xe;var k=Ue(require("react"),1);var We=function({children:r,title:t}){let o=(0,k.useContext)(q),p=(0,k.useMemo)(()=>o.createProvider(),[o]);(0,k.useEffect)(()=>()=>{p.disconnect()},[p]);function n(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function P(e){let f=Object.keys(e.props).reduce((s,F)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(F))return s;let S=e.props[F];return S===""?s+` ${F}`:s+` ${F}="${S}"`},"");return`<${e.type}${f}>`}function c(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((f,s)=>f+m(s),"")}function m(e){let f=P(e);return e.props.children&&(f+=c(e)),e.props.dangerouslySetInnerHTML&&(f+=e.props.dangerouslySetInnerHTML.__html),n(e)||(f+=`</${e.type}>`),f}function l(e){return k.default.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function g(e){return m(l(e))}function d(e){let f=k.default.Children.toArray(e).filter(s=>s).map(s=>g(s));return t&&!f.find(s=>s.startsWith("<title"))&&f.push(`<title inertia>${t}</title>`),f}return p.update(d(r)),null},Ie=We;var I=require("@inertiajs/core"),v=require("react"),A=()=>{},Ee=(0,v.forwardRef)(({children:r,as:t="a",data:o={},href:p,method:n="get",preserveScroll:P=!1,preserveState:c=null,replace:m=!1,only:l=[],except:g=[],headers:d={},queryStringArrayFormat:e="brackets",async:f=!1,onClick:s=A,onCancelToken:F=A,onBefore:S=A,onStart:w=A,onProgress:M=A,onFinish:se=A,onCancel:z=A,onSuccess:ae=A,onError:$=A,prefetch:b=!1,cacheFor:x=0,...ie},pe)=>{let[ue,G]=(0,v.useState)(0),W=(0,v.useRef)(null);t=t.toLowerCase(),n=typeof p=="object"?p.method:n.toLowerCase();let[L,ce]=(0,I.mergeDataIntoQueryString)(n,typeof p=="object"?p.url:p||"",o,e),B=L;o=ce;let X={data:o,method:n,preserveScroll:P,preserveState:c??n!=="get",replace:m,only:l,except:g,headers:d,async:f},Z={...X,onCancelToken:F,onBefore:S,onStart(a){G(V=>V+1),w(a)},onProgress:M,onFinish(a){G(V=>V-1),se(a)},onCancel:z,onSuccess:ae,onError:$},_=()=>{I.router.prefetch(B,X,{cacheFor:le})},E=(0,v.useMemo)(()=>b===!0?["hover"]:b===!1?[]:Array.isArray(b)?b:[b],Array.isArray(b)?b:[b]),le=(0,v.useMemo)(()=>x!==0?x:E.length===1&&E[0]==="click"?0:3e4,[x,E]);(0,v.useEffect)(()=>()=>{clearTimeout(W.current)},[]),(0,v.useEffect)(()=>{E.includes("mount")&&setTimeout(()=>_())},E);let i={onClick:a=>{s(a),(0,I.shouldIntercept)(a)&&(a.preventDefault(),I.router.visit(B,Z))}},h={onMouseEnter:()=>{W.current=window.setTimeout(()=>{_()},75)},onMouseLeave:()=>{clearTimeout(W.current)},onClick:i.onClick},y={onMouseDown:a=>{(0,I.shouldIntercept)(a)&&(a.preventDefault(),_())},onMouseUp:a=>{a.preventDefault(),I.router.visit(B,Z)},onClick:a=>{s(a),(0,I.shouldIntercept)(a)&&a.preventDefault()}};return n!=="get"&&(t="button"),(0,v.createElement)(t,{...ie,...{a:{href:B},button:{type:"button"}}[t]||{},ref:pe,...E.includes("hover")?h:E.includes("click")?y:i,"data-loading":ue>0?"":void 0},r)});Ee.displayName="InertiaLink";var ke=Ee;var ge=require("@inertiajs/core"),K=require("es-toolkit"),O=require("es-toolkit/compat"),u=require("react");var me=require("@inertiajs/core"),oe=require("react");function N(r,t){let[o,p]=(0,oe.useState)(()=>{let n=me.router.restore(t);return n!==void 0?n:r});return(0,oe.useEffect)(()=>{me.router.remember(o,t)},[o,t]),[o,p]}function Pe(r,t){let o=(0,u.useRef)(null),p=typeof r=="string"?r:null,[n,P]=(0,u.useState)((typeof r=="string"?t:r)||{}),c=(0,u.useRef)(null),m=(0,u.useRef)(null),[l,g]=p?N(n,`${p}:data`):(0,u.useState)(n),[d,e]=p?N({},`${p}:errors`):(0,u.useState)({}),[f,s]=(0,u.useState)(!1),[F,S]=(0,u.useState)(!1),[w,M]=(0,u.useState)(null),[se,z]=(0,u.useState)(!1),[ae,$]=(0,u.useState)(!1),b=(0,u.useRef)(i=>i);(0,u.useEffect)(()=>(o.current=!0,()=>{o.current=!1}),[]);let x=(0,u.useCallback)((...i)=>{let h=typeof i[0]=="object",y=h?i[0].method:i[0],D=h?i[0].url:i[1],a=(h?i[1]:i[2])??{},V={...a,onCancelToken:T=>{if(c.current=T,a.onCancelToken)return a.onCancelToken(T)},onBefore:T=>{if(z(!1),$(!1),clearTimeout(m.current),a.onBefore)return a.onBefore(T)},onStart:T=>{if(S(!0),a.onStart)return a.onStart(T)},onProgress:T=>{if(M(T),a.onProgress)return a.onProgress(T)},onSuccess:T=>{if(o.current&&(S(!1),M(null),e({}),s(!1),z(!0),$(!0),P((0,K.cloneDeep)(l)),m.current=setTimeout(()=>{o.current&&$(!1)},2e3)),a.onSuccess)return a.onSuccess(T)},onError:T=>{if(o.current&&(S(!1),M(null),e(T),s(!0)),a.onError)return a.onError(T)},onCancel:()=>{if(o.current&&(S(!1),M(null)),a.onCancel)return a.onCancel()},onFinish:T=>{if(o.current&&(S(!1),M(null)),c.current=null,a.onFinish)return a.onFinish(T)}};y==="delete"?ge.router.delete(D,{...V,data:b.current(l)}):ge.router[y](D,b.current(l),V)},[l,e,b]),ie=(0,u.useCallback)((i,h)=>{g(typeof i=="string"?y=>(0,O.set)((0,K.cloneDeep)(y),i,h):typeof i=="function"?y=>i(y):i)},[g]),pe=(0,u.useCallback)((i,h)=>{P(typeof i>"u"?()=>l:y=>typeof i=="string"?(0,O.set)((0,K.cloneDeep)(y),i,h):Object.assign((0,K.cloneDeep)(y),i))},[l,P]),ue=(0,u.useCallback)((...i)=>{i.length===0?g(n):g(h=>i.filter(y=>(0,O.has)(n,y)).reduce((y,D)=>(0,O.set)(y,D,(0,O.get)(n,D)),{...h}))},[g,n]),G=(0,u.useCallback)((i,h)=>{e(y=>{let D={...y,...typeof i=="string"?{[i]:h}:i};return s(Object.keys(D).length>0),D})},[e,s]),W=(0,u.useCallback)((...i)=>{e(h=>{let y=Object.keys(h).reduce((D,a)=>({...D,...i.length>0&&!i.includes(a)?{[a]:h[a]}:{}}),{});return s(Object.keys(y).length>0),y})},[e,s]),L=i=>(h,y)=>{x(i,h,y)},ce=(0,u.useCallback)(L("get"),[x]),B=(0,u.useCallback)(L("post"),[x]),X=(0,u.useCallback)(L("put"),[x]),Z=(0,u.useCallback)(L("patch"),[x]),_=(0,u.useCallback)(L("delete"),[x]),E=(0,u.useCallback)(()=>{c.current&&c.current.cancel()},[]),le=(0,u.useCallback)(i=>{b.current=i},[]);return{data:l,setData:ie,isDirty:!(0,K.isEqual)(l,n),errors:d,hasErrors:f,processing:F,progress:w,wasSuccessful:se,recentlySuccessful:ae,transform:le,setDefaults:pe,reset:ue,setError:G,clearErrors:W,submit:x,get:ce,post:B,put:X,patch:Z,delete:_,cancel:E}}var Ae=require("@inertiajs/core"),ne=require("react");function ye(r,t={},o={keepAlive:!1,autoStart:!0}){let p=(0,ne.useRef)(Ae.router.poll(r,t,{...o,autoStart:!1}));return(0,ne.useEffect)(()=>((o.autoStart??!0)&&p.current.start(),()=>p.current.stop()),[]),{stop:p.current.stop,start:p.current.start}}var j=require("@inertiajs/core"),U=require("react");function he(r={}){let t=typeof window>"u"?null:j.router.getCached(window.location.pathname,r),o=typeof window>"u"?null:j.router.getPrefetching(window.location.pathname,r),[p,n]=(0,U.useState)(t?.staleTimestamp||null),[P,c]=(0,U.useState)(o!==null),[m,l]=(0,U.useState)(t!==null);return(0,U.useEffect)(()=>{let g=j.router.on("prefetching",e=>{e.detail.visit.url.pathname===window.location.pathname&&c(!0)}),d=j.router.on("prefetched",e=>{e.detail.visit.url.pathname===window.location.pathname&&(c(!1),l(!0),n(e.detail.fetchedAt))});return()=>{d(),g()}},[]),{lastUpdatedAt:p,isPrefetching:P,isPrefetched:m,flush:()=>j.router.flush(window.location.pathname,r)}}var Oe=require("@inertiajs/core"),R=require("react"),we=({children:r,data:t,params:o,buffer:p,as:n,always:P,fallback:c})=>{P=P??!1,n=n??"div",c=c??null;let[m,l]=(0,R.useState)(!1),g=(0,R.useRef)(!1),d=(0,R.useRef)(!1),e=(0,R.useRef)(null),f=(0,R.useCallback)(()=>{if(t)return{only:Array.isArray(t)?t:[t]};if(!o)throw new Error("You must provide either a `data` or `params` prop.");return o},[o,t]);return(0,R.useEffect)(()=>{if(!e.current)return;let s=new IntersectionObserver(F=>{if(!F[0].isIntersecting||(!P&&g.current&&s.disconnect(),d.current))return;g.current=!0,d.current=!0;let S=f();Oe.router.reload({...S,onStart:w=>{d.current=!0,S.onStart?.(w)},onFinish:w=>{l(!0),d.current=!1,S.onFinish?.(w),P||s.disconnect()}})},{rootMargin:`${p||0}px`});return s.observe(e.current),()=>{s.disconnect()}},[e,f,p]),P||!m?(0,R.createElement)(n,{props:null,ref:e},m?r:c):m?r:null};we.displayName="InertiaWhenVisible";var Me=we;var fe=Le.router;
//# sourceMappingURL=index.js.map
